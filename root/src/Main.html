<!DOCTYPE html>
<html lang="en">
<head>
    <title>Virtual Simulator</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/Style.css">
    <link rel="stylesheet" href="css/sideTrack.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="js/Index.js"></script>
    <script src="js/config/config.js"></script>
    <script src="js/config/keyConfig.js"></script>
    <script src="js/config/holderConfig.js"></script>
    <script src="js/config/leverConfig.js"></script>
    <script src="js/config/sideTrackConfig.js"></script>
    <script src="js/config/switchConfig.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/sideTrack.js"></script>
    <script src="js/holderFunctions.js"></script>
    <script src="js/keyFunctions.js"></script>
    <script src="js/leverFunctions.js"></script>
    <script src="js/switchFunctions.js"></script>
    <script src="js/config/ledConfig.js"></script>
    <script src="js/config/trainConfig.js"></script>
    <script src="js/trainFunctions.js"></script>
</head>

<body onload="initializeData()" style="background-color: white;">
    <div id="buttonGroup">
        <a href="#" id="info"><i>i</i></a>
        <!-- <a href="#" id="manual"><i>m</i></a> -->
    </div>
    <div class="modal fade" id="infoModal">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h4 class="modal-title">Information</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
            <div class="modal-body">
                <!-- <p>Long instructions here</p> -->
                <h3><b>Steps to Choose Left Track</b></h3>
                <p><b>STEP 1: </b>You need to turn on the announcement button (Bp.An) before to start<br><br>
                <b>STEP 2: </b>You need to provide a warning signal A1, But before that you have to choose the path in which the train has to move. (C111V3- LEFT, C111V1-STRAIGHT) <br><br>
                <b>STEP 3: </b>IF chosen C111V3-left side
                <ul>
                    <li>We need to change the needle to left track by activating the Ag5 and V6 levers.</li>
                    <li>Unlock the 6N key of V6 by turning clockwise direction.</li>
                    <li>Change the lever position of V6 from close to open (left to right) to remove 5 Key.</li>
                    <li>Lock the 5 key by turning the key in Anti-clockwise direction. Now remove the top 5 key from V6 and place on top 5 in Ag5 lever.</li>
                    <li>Now all keys are available. Turn both the top 5 and 5N keys in clockwise direction to unlock. Now Ag5 lever is moved from right to left.</li>
                    <li>To make the track to move left side. And the keys bottom 5 and 5R are locked by turning Anti-clockwise direction and Ag5 is locked.</li>
                    <li>Now you notice 5.V6 signal is turned off. We have to bring the needle light, to ensure the needle is pointing towards left track.</li>
                </ul>
                <b>STEP 4: </b>Remove the bottom 5 key from Ag5 and perform the manual operation of track changing and now you can see the light in Needle.
                <ul>
                    <li>Replace the bottom 5 key from Ag5 and place it to 5 slot of V6 and turn it into clockwise to unlock and turn the lever from right to left.</li>
                </ul>
                <b>STEP 5: </b>To bring the electrical supply to left side track.
                <ul>
                    <li>Turn 6N key from V6 anticlockwise and remove, place it in 6N slot of C111V3.</li>
                    <li>Remove the 5R key from Ag5 and place in  5R  slot of C111V3.</li>
                    <li>Now unlock (clockwise) and change the lever position (left to right) to give electrical flow to the path. (111 - Light goes off, Z13 - White, Z17 - White).</li>
                </ul>
                <b>STEP 6: </b>Now we need to open the A1 lever for providing the warning signal that train is approaching. <br>
                To Activate A1:
                <ul>
                    <li>Turn anticlockwise and remove AN Key from C111V3 and place it in AN key of A1.</li>
                    <li>Turn clockwise to unlock and now change the lever position (left to right) to enable A1 warning signal.</li>
                </ul></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalElement">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Attention</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div id="modalBody" class="modal-body"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Ferme</button>
                </div>
            </div>
        </div>
    </div>
     <!-- <div id="sidebarTrigger">
        <button id="sidebarTriggerButton" class="openbtn" style="background-color: white; color: black;">&lt;</button>
    </div>  -->
    <div  id="sidebarBlock" class="w3-sidebar w3-bar-block w3-card w3-animate-right">
        <img src="assets/PNG/Track-01.png" class="img-fluid" id="sidebarTrack">
        <img src="assets/PNG/Track-02.png" class="img-fluid" id="sidebarSplit">
         <img src="assets/PNG/5_Separate.png" class="img-fluid" id="upperL7KeyHolder5"  
                    ondrop="dragDrop(event)" ondragover="allowDrop(event)">
        <img id="upperL7Key5" src="assets/PNG/1_J_1.png" class="img-fluid" 
                    ondragstart="dragStart(event)"
                    onclick="rotateKey(event)">
    </div>
    <div id="contentContainer" style="transition: 0.5s;">
        <div id="displayBoardContainer" class="container-fluid text-center">
            <div class="row" style="background-color: rgb(20, 20, 20);">
                <div class="track-base">
                    <p id="start">EPINAY</p>
                    <img src="assets/PNG/track_straight.png" class="img-fluid" id="straight">
                    <img src="assets/PNG/track_split.png" class="img-fluid" id="split">
                    <img src="assets/PNG/track_above.png" class="img-fluid" id="up">
                    <img src="assets/PNG/track_above.png" class="img-fluid" id="down">
                    <p id="label-annonce">Annonce</p>
                    <img src="assets/PNG/Annonce_White.png" class="img-fluid" id="led-annonce">
                    <p id="label-awa">AwA</p>
                    <img src="assets/PNG/AWA_Red.png" class="img-fluid" id="led-awa">
                    <p id="label-a1">A1</p>
                    <img src="assets/PNG/A1_Normal_State.png" class="img-fluid" id="led-a1">
                    <p id="label-zap">ZAp</p>
                    <img src="assets/PNG/ZAP_Orange.png" class="img-fluid" id="led-zap">
                    <p id="label-111">111</p>
                    <img src="assets/PNG/111_Red.png" class="img-fluid" id="led-111">
                    <p id="label-5v6">5.V6</p>
                    <img src="assets/PNG/5v6_Orange.png" class="img-fluid" id="led-5v6">
                    <img src="assets/PNG/25_4.png" class="img-fluid" id="led-25_4">
                    <img src="assets/PNG/25_5.png" class="img-fluid" id="led-25_5">
                    <img src="assets/PNG/Z13_Ash.png" class="img-fluid" id="tracklight1">
                    <img src="assets/PNG/Z15_Ash.png" class="img-fluid" id="tracklight2">
                    <img src="assets/PNG/Z17_Ash.png" class="img-fluid" id="tracklight3">
                    <img src="assets/PNG/train.png" class="img-fluid" id="train">
                    <p id="end">LE TREPORT</p>
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-z9" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-z11" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-z13" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-z15" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-z17" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-25_4" onclick="toggleSwitch(this.id)">
                    <img src="assets/PNG/switch_default.png" class="img-fluid" id="switch-25_5"  onclick="toggleSwitch(this.id)">
                    <h5 id="label-occupee_1">occupée</h5>
                    <h5 id="label-occupee_2">occupée</h5>
                    <h5 id="label-occupee_3">occupée</h5>
                    <h5 id="label-occupee_4">occupée</h5>
                    <h5 id="label-occupee_5">occupée</h5>
                    <h5 id="label-occupee_6">occupée</h5>
                    <h5 id="label-occupee_7">occupée</h5>
                    <h6 id="label-libre_1">Libre</h6>
                    <h6 id="label-libre_2">Libre</h6>
                    <h6 id="label-libre_3">Libre</h6>
                    <h6 id="label-libre_4">Libre</h6>
                    <h6 id="label-libre_5">Libre</h6>
                    <h6 id="label-bp_an">Bp_An</h6>
                    <div id="line-0"></div>
                    <div id="line-1"></div>
                    <div id="line-2"></div>
                    <div id="line-3"></div>
                    <div id="line-4"></div>
                    <div id="line-5"></div>
                    <h6 id="label-z9">z,9</h6>
                    <h6 id="label-z11">z,11</h6>
                    <h6 id="label-z13">z,13</h6>
                    <h6 id="label-z15">z,15</h6>
                    <h6 id="label-z17">z,17</h6>
                    <h6 id="label-25_4">25<sup>4</sup></h6>
                    <h6 id="label-25_5">25<sup>5</sup></h6>
                    <img src="assets/PNG/BP_AN.png" class="img-fluid" id="Bp_An" onclick="turnOnAnnouncement()">
                    <h6 id="label-z_13">z,13</h6>
                    <h6 id="label-z_15">z,15</h6>
                    <h6 id="label-z_17">z,17</h6>
                    <h6 id="label-25_4_track">25<sup>4</sup></h6>
                    <h6 id="label-25_5_track">25<sup>5</sup></h6>
                    <!-- <img src="assets/PNG/brace.png" class="img-fluid" id="curly_brace"> -->
                    <!-- <img src="assets/PNG/open_rect.png" class="img-fluid" id="curly_brace"> -->
                    <h6 id="label-brace"><-Z Ap 111-></h6>
                </div>
            </div>
        </div>
        
        <div id="emergencyContainer" class="container-fluid" style="display: block; position:absolute;">
            <div class="col">
                <div id="emergencyControl" class="col-2" style="transform: translateY(-38%) translateX(-10%);">
                    <img class="img-fluid col-5 d-block" id="emergency-box" src="assets/PNG/Emergency_Box-01.png">
                </div>
            </div>
        </div>
    
        <!-- <div id="labelContainer" class="container-fluid" style="display: none;">
            <div id="labelRow" class="row" style="background-color: white; color: black;">
                <div id="labelSet1" class="col-2 text-center">
                    <h6>L1</h6>
                </div>
                <div id="labelSet2" class="col-2 text-center">
                    <h6>L2</h6>
                </div>
                <div id="labelSet3" class="col-2 text-center">
                    <h6>L3</h6>
                </div>
                <div id="labelSet4" class="col-2 text-center">
                    <h6>L4</h6>
                </div>
                <div id="labelSet5" class="col-2 text-center">
                    <h6>L5</h6>
                </div>
                <div id="labelSet6" class="col-2 text-center">
                    <h6>L6</h6>
                </div>
            </div>
        </div>

        <div id="upperHolderContainer" class="container-fluid" style="display: none;">
            <div id="upperKeyRow" class="row" style="background-color: white;">
                <div id="upperKeySet1" class="col-2 text-center">
                </div>
                <div id="upperKeySet2" class="col-2 text-center">
                    
                </div>
                <div id="upperKeySet3" class="col-2 text-center" style="border-top: 1px solid black; border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="upperL3KeyHolderAN" src="assets/PNG/AN_Key.png" class="img-fluid col-3 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)" > 
                        <img id="upperL3KeyAN" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperKeySet4" class="col-2 text-center" style="border-top: 1px solid black; border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="upperL4KeyHolderAN" src="assets/PNG/AN_Key.png" class="img-fluid col-3 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="upperL4KeyAN" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperKeySet5" class="col-2 text-center" style="border-top: 1px solid black; border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="upperL5KeyHolder" src="assets/PNG/5_5N_Key.png" class="img-fluid col-6 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="upperL5Key5" src="assets/PNG/key.png" class="img-fluid "
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                        <img id="upperL5Key5N" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperKeySet6" class="col-2 text-center" style="border-top: 1px solid black; border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="upperL6KeyHolder5" src="assets/PNG/5_Key.png" class="img-fluid col-3 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="upperL6Key5" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
            </div>
        </div>
        <div id="lowerHolderContainer" class="container-fluid" style="display: none;">
            <div id="lowerKeyRow" class="row" style="background-color: white;">
                <div id="lowerKeySet1" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                </div>
                <div id="lowerKeySet2" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="lowerL2KeyHolderAN" src="assets/PNG/AN_Key.png" class="img-fluid col-3 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="lowerL2KeyAN" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="lowerKeySet3" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="lowerL3KeyHolder" src="assets/PNG/5R_6N_Key.png" class="img-fluid col-6 mx-auto d-block "
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="lowerL3Key5R" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                        <img id="lowerL3Key6N" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="lowerKeySet4" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="lowerL4KeyHolder" src="assets/PNG/5N_6N_Key.png" class="img-fluid col-6 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="lowerL4Key5N" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                        <img id="lowerL4Key6N" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="lowerKeySet5" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="lowerL5KeyHolder" src="assets/PNG/5_5R_Key.png" class="img-fluid col-6 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="lowerL5Key5" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                        <img id="lowerL5Key5R" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">   
                </div>
                <div id="lowerKeySet6" class="col-2 text-center" style="border-left: 1px solid black; border-right: 1px solid black;">
                    <img id="lowerL6KeyHolder6N" src="assets/PNG/6N_Key.png" class="img-fluid col-3 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                        <img id="lowerL6Key6N" src="assets/PNG/key.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
            </div>
        </div> -->
        <!-- <br> -->
        <div id="upperHolderContainer" class="container-fluid mt-2">
            <div id="upperHolderRow" class="row justify-content-center" style="background-color: white;">
                <div id="upperHolder1ContainerAuA" class="col-2 container-fluid"></div>
                <div id="upperHolder2ContainerA1" class="col-2 container-fluid"></div>
                <div id="upperHolder3ContainerC111" class="col-2 container-fluid">
                    <img id="upperL3KeyHolderAN" src="assets/PNG/AN_Left_Unlocked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="upperL3KeyAN" src="assets/PNG/1_H_3.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperHolder4ContainerC111" class="col-2 container-fluid">
                    <img id="upperL4KeyHolderAN" src="assets/PNG/AN_Left_Unlocked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="upperL4KeyAN" src="assets/PNG/1_H_3.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperHolder5ContainerAg5" class="col-2 container-fluid">
                    <img id="upperL5KeyHolder" src="assets/PNG/5_5N_Right_Locked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">  
                    <img id="upperL5Key5" src="assets/PNG/1_J_1.png" class="img-fluid"
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">    
                    <img id="upperL5Key5N" src="assets/PNG/1_D_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="upperHolder6ContainerV6" class="col-2 container-fluid">
                    <img id="upperL6KeyHolder5" src="assets/PNG/5_Left_Unlocked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="upperL6Key5" src="assets/PNG/1_J_1.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
            </div>
        </div>
        <div id="levercontainer" class="container-fluid">
            <div id="leverRow" class="row justify-content-center" style="background-color: white;">
                <div id="lever1ContainerAuA" class="col-2 container-fluid">
                    <img id="lowerL1" src="assets/PNG/Au_A_A.png" class="customWidth1 col-12 mx-auto d-block">
                </div>
                <div id="lever2ContainerA1" class="col-2 container-fluid">
                    <img id="lowerL2KeyHolderAN" onclick="changeLeverPosition('lever2A1')" src="assets/PNG/A1_F_Left_Locked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)"> 
                    <img id="lowerL2KeyAN" src="assets/PNG/1_H_3.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="lever3ContainerC111" class="col-2 container-fluid">
                    <img id="lowerL3KeyHolder" onclick="changeLeverPosition('lever3C111')" src="assets/PNG/C111_V3_F_Left_Locked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="lowerL3Key5R" src="assets/PNG/2_F_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                    <img id="lowerL3Key6N" src="assets/PNG/3_J_5.png" class="img-fluid" 
                        ondragstart="dragStart(event)"
                        onclick="rotateKey(event)">
                </div>
                <div id="lever4ContainerC111" class="col-2 container-fluid">
                    <img id="lowerL4KeyHolder" onclick="changeLeverPosition('lever4C111')" src="assets/PNG/C111_V1_F_Left_Locked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="lowerL4Key5N" src="assets/PNG/1_D_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                    <img id="lowerL4Key6N" src="assets/PNG/3_J_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
                <div id="lever5ContainerAg5" class="col-2 container-fluid">
                    <img id="lowerL5KeyHolder" onclick="changeLeverPosition('lever5Ag5')" src="assets/PNG/Ag5_D_Right_Unlocked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">  
                    <img id="lowerL5Key5" src="assets/PNG/1_J_1.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                    <img id="lowerL5Key5R" src="assets/PNG/2_F_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">    
                </div>
                <div id="lever6ContainerV6" class="col-2 container-fluid">
                    <img id="lowerL6KeyHolder6N" onclick="changeLeverPosition('lever6V6')" src="assets/PNG/V6_L_Left_Locked.png" class="customWidth1 col-12 mx-auto d-block"
                            ondrop="dragDrop(event)" ondragover="allowDrop(event)">
                    <img id="lowerL6Key6N" src="assets/PNG/3_J_5.png" class="img-fluid" 
                            ondragstart="dragStart(event)"
                            onclick="rotateKey(event)">
                </div>
            </div>
        </div>
    </div>
</body>

</html>